pipeline {
    agent any

	tools {
		maven "maven-3.5.0"
	}
	stages{
	 stage('scm'){
	   git 'https://github.com/SonarSource/sonarqube'
	   }
	   stage('SonarQube analysis') {
	     steps {
		//Prepare SonarQube scanner enviornment
		withSonarQubeEnv('sonarqube-3.2.0') {
		    sh ' \'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:2.8.1:sonar\'' 
		}
	      }
	}
  stage('Execute Maven') {
		steps {
		   script {
		
		    sh 'mvn clean package'
			}
		}
	}
 } }
 
